# Progress Log

This file tracks AI-assisted development progress.
Each entry documents: date, feature, decisions, files changed, tests, and concerns.

---

[2026-02-14] #1 refactor: Add Orders projection, consolidate builder, add README
- Files: packages/domain/src/orders.ts (new), packages/domain/src/bootstrap.ts, packages/domain/src/index.ts, packages/domain/test/cart.spec.ts, packages/app/src/api/index.ts, packages/app/src/api/builder.ts (deleted), packages/app/src/server.ts, packages/app/src/dev-server.ts, README.md
- Changes: Replaced event-log-scanning listOrders with an Orders projection using Act's projection() builder and in-memory read model. Consolidated duplicated app builder from app package into domain bootstrap. Added README.
- Decisions: Used projection() builder with in-memory Map instead of a state aggregate — projections are side-effect handlers that update external read models, not per-stream aggregates. Auto-drain committed handler lives in app layer (api/index.ts) to avoid race conditions in domain tests.
- Issues: None

[2026-02-18] #3 refactor: Refactor Inventory from aggregate to projection with stock tracking
- Files: packages/domain/src/schemas.ts, packages/domain/src/inventory.ts, packages/domain/src/bootstrap.ts, packages/domain/src/index.ts, packages/domain/test/cart.spec.ts, packages/app/src/api/index.ts, packages/app/src/dev-server.ts, packages/app/src/client/App.tsx
- Changes: Renamed InventoryUpdated→InventoryImported, added name/price/quantity fields. Created InventoryProjection subscribing to InventoryImported, InventoryAdjusted, InventoryDecommissioned, CartPublished. Three inventory actions: ImportInventory (seeding), AdjustInventory (admin stock), DecommissionInventory (remove product). Fixed SubmitCart drain loop to ensure projections process CartPublished before response. Added cart quantity controls (+/- buttons, items grouped by product).
- Decisions: ImportInventory for seeding; AdjustInventory for admin; DecommissionInventory removes from projection (re-importable). SubmitCart uses drainAll loop (up to 5 rounds) to fully process reactions + projections. Cart drawer groups items by productId with quantity controls instead of individual line items.
- Issues: None
