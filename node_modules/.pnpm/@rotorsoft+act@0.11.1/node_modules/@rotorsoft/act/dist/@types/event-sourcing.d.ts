/**
 * @module event-sourcing
 * @category Event Sourcing
 *
 * Utilities for event sourcing, snapshotting, and event store interaction.
 */
import type { Committed, Schema, Schemas, Snapshot, State, Target } from "./types/index.js";
/**
 * Event sourcing utilities for snapshotting, loading, and committing actions/events.
 * Used internally by Act and state machines.
 */
/**
 * Saves a snapshot of the state to the store.
 *
 * Snapshots are used to optimize state reconstruction for aggregates with long event streams.
 *
 * @template S The type of state
 * @template E The type of events
 * @param snapshot The snapshot to save
 * @returns Promise that resolves when the snapshot is saved
 *
 * @example
 * await snap(snapshot);
 */
export declare function snap<S extends Schema, E extends Schemas>(snapshot: Snapshot<S, E>): Promise<void>;
/**
 * Loads a snapshot of the state from the store by replaying events and applying patches.
 *
 * @template S The type of state
 * @template E The type of events
 * @template A The type of actions
 * @param me The state machine definition
 * @param stream The stream (instance) to load
 * @param callback (Optional) Callback to receive the loaded snapshot as it is built
 * @returns The snapshot of the loaded state
 *
 * @example
 * const snapshot = await load(Counter, "counter1");
 */
export declare function load<S extends Schema, E extends Schemas, A extends Schemas>(me: State<S, E, A>, stream: string, callback?: (snapshot: Snapshot<S, E>) => void): Promise<Snapshot<S, E>>;
/**
 * Executes an action and emits an event to be committed by the store.
 *
 * This function validates the action, applies business invariants, emits events, and commits them to the event store.
 *
 * @template S The type of state
 * @template E The type of events
 * @template A The type of actionSchemas
 * @template K The type of action to execute
 * @param me The state machine definition
 * @param action The action to execute
 * @param target The target (stream, actor, etc.)
 * @param payload The payload of the action
 * @param reactingTo (Optional) The event that the action is reacting to
 * @param skipValidation (Optional) Whether to skip validation (not recommended)
 * @returns The snapshot of the committed event
 *
 * @example
 * const snapshot = await action(Counter, "increment", { stream: "counter1", actor }, { by: 1 });
 */
export declare function action<S extends Schema, E extends Schemas, A extends Schemas, K extends keyof A>(me: State<S, E, A>, action: K, target: Target, payload: Readonly<A[K]>, reactingTo?: Committed<Schemas, keyof Schemas>, skipValidation?: boolean): Promise<Snapshot<S, E>[]>;
//# sourceMappingURL=event-sourcing.d.ts.map